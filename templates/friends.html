{% extends 'base.html' %} {% block title %}Profile{% endblock %} {%block body%}
{% block content%}
<div class="friends">
  <header class="header header-friends">
    <div class="search-container">
      <form method="post" class="f-form">
        <input
          type="text"
          placeholder="Search user..."
          name="name"
          class="search"
        />
        <button type="submit"><i class="fa fa-search"></i></button>
      </form>
    </div>
  </header>

  <main class="main-container main-friends">
    {% for user in users %}
    <p style="display: inline-block">{{ user.username }}</p>
    {% if user.id not in friends|map(attribute="user_id")|list and user.id !=
    session.id %}
    <form method="post" action="/follow" class="follow-form">
      <input type="submit" value="Follow" />
      <input type="hidden" name="username" value="{{ user.username }}" />
      <input type="hidden" name="user_id" value="{{ user.id }}" />
    </form>
    {% endif %} {% endfor %}
    <div>
      <h2>Friends</h2>
      <ol>
        {% for friend in friends %}
        <li>
          <a href="/{{ friend.f_username}}"> {{ friend.f_username }} </a>
        </li>
        {% endfor %}
      </ol>
    </div>

    <div>
      <h2 style="margin-top: 5%">Popular With Friends</h2>
      <section class="carta-list">
        {% for like in liked %}
        <article class="carta">
          <header class="carta-header">
            <img class="img-carta" src="{{like.poster}}" />
            <h5>{{like.movie.upper()}}</h5>
            <p style="margin-top: 0">{{like.director }} - {{like.p_year}}</p>
          </header>
        </article>
        {% endfor %}
      </section>
    </div>
  </main>
  {% endblock %} {% endblock %}
</div>
